!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=n(4);let i,s,c,l=0,u=Date.now(),a=[];window.onload=(()=>{i=document.getElementById("canvas"),s=i.getContext("2d"),(c=document.getElementById("reset")).onclick=(()=>{let e={type:r.MessageType.RESET};d.send(JSON.stringify(e)),l=0}),function(){function e(e){return(e=(e+256&511)-256)<0&&(e=-e),e}for(let t=0;t<=4096;t++)a.push([e(7*t),e(5*t),e(11*t)])}();let e={type:r.MessageType.CONFIGURATION,content:{width:i.clientWidth,height:i.clientHeight}};d.send(JSON.stringify(e))});let d=new o.w3cwebsocket("ws://localhost:9030");d.onopen=(()=>{console.log("WebSocket-Connection established")}),d.onmessage=(e=>{let t=JSON.parse(e.data).content;if(t.row===i.clientHeight-1){console.log("Generation: "+l);let e=Date.now();console.log("Time elapsed: "+(u-e)/1e3+" s"),u=e,l++}!function(e){let t=s.createImageData(i.clientWidth,1),n=t.data,o=e.data;for(let e=0;e<t.width;e++){let t=4*e,r=4*e+1,i=4*e+2;if(n[4*e+3]=255,o[e]<0)n[t]=n[r]=n[i]=0;else{let s=a[o[e]];n[t]=s[0],n[r]=s[1],n[i]=s[2]}}s.putImageData(t,0,e.row)}(t)})},function(e,t,n){var o=function(){return this}(),r=o.WebSocket||o.MozWebSocket,i=n(2);function s(e,t){return t?new r(e,t):new r(e)}r&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(s,e,{get:function(){return r[e]}})}),e.exports={w3cwebsocket:r?s:null,version:i}},function(e,t,n){e.exports=n(3).version},function(e){e.exports={_from:"websocket",_id:"websocket@1.0.28",_inBundle:!1,_integrity:"sha512-00y/20/80P7H4bCYkzuuvvfDvh+dgtXi5kzDf3UcZwN6boTYaKvsrtZ5lIYm1Gsg48siMErd9M4zjSYfYFHTrA==",_location:"/websocket",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"websocket",name:"websocket",escapedName:"websocket",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.28.tgz",_shasum:"9e5f6fdc8a3fe01d4422647ef93abdd8d45a78d3",_spec:"websocket",_where:"D:\\JavaScript\\mandelbrot\\client",author:{name:"Brian McKelvey",email:"theturtle32@gmail.com",url:"https://github.com/theturtle32"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},bundleDependencies:!1,config:{verbose:!1},contributors:[{name:"IÃ±aki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.11.0","typedarray-to-buffer":"^3.1.5",yaeti:"^0.0.6"},deprecated:!1,description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.9.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.28"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CONFIGURATION=0]="CONFIGURATION",e[e.RESET=1]="RESET",e[e.ROW=2]="ROW",e[e.TASK=3]="TASK"}(t.MessageType||(t.MessageType={}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnNvY2tldC9saWIvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2Vic29ja2V0L2xpYi92ZXJzaW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9lbnVtcy50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIndlYnNvY2tldF8xIiwiZW51bXNfMSIsImNhbnZhcyIsImNvbnRleHQiLCJidXR0b24iLCJnZW5lcmF0aW9uIiwidGhlbiIsIkRhdGUiLCJub3ciLCJwYWxldHRlIiwid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJvbmNsaWNrIiwibWVzc2FnZSIsInR5cGUiLCJNZXNzYWdlVHlwZSIsIlJFU0VUIiwic29ja2V0Iiwic2VuZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ3cmFwIiwieCIsInB1c2giLCJtYWtlUGFsZXR0ZSIsIkNPTkZJR1VSQVRJT04iLCJjb250ZW50Iiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsImNsaWVudEhlaWdodCIsInczY3dlYnNvY2tldCIsIm9ub3BlbiIsImNvbnNvbGUiLCJsb2ciLCJvbm1lc3NhZ2UiLCJldmVudCIsInBhcnNlIiwiZGF0YSIsInJvdyIsInJlc3VsdCIsImNyZWF0ZUltYWdlRGF0YSIsInBpeGVscyIsInZhbHVlcyIsImciLCJiIiwicHV0SW1hZ2VEYXRhIiwiZHJhd1JvdyIsIl9nbG9iYWwiLCJ0aGlzIiwiTmF0aXZlV2ViU29ja2V0IiwiV2ViU29ja2V0IiwiTW96V2ViU29ja2V0Iiwid2Vic29ja2V0X3ZlcnNpb24iLCJXM0NXZWJTb2NrZXQiLCJ1cmkiLCJwcm90b2NvbHMiLCJmb3JFYWNoIiwicHJvcCIsInZlcnNpb24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdB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RyxHQUNqQndFLEVBQVFFLEdBQU0xRSxFQUFHLEdBQ2pCd0UsRUFBUUcsR0FBTTNFLEVBQUcsSUFJekI4QixFQUFROEMsYUFBY1AsRUFBSyxFQUFHQyxFQUFPRCxLQXdCckNRLENBQVNyQixzQkN2SGIsSUFBQXNCLEVBQUEsV0FBMkIsT0FBQUMsS0FBM0IsR0FDQUMsRUFBQUYsRUFBQUcsV0FBQUgsRUFBQUksYUFDQUMsRUFBd0I1RixFQUFRLEdBTWhDLFNBQUE2RixFQUFBQyxFQUFBQyxHQWlCQSxPQWRBQSxFQUNBLElBQUFOLEVBQUFLLEVBQUFDLEdBR0EsSUFBQU4sRUFBQUssR0FZQUwsR0FDQSx5Q0FBQU8sUUFBQSxTQUFBQyxHQUNBbkYsT0FBQUMsZUFBQThFLEVBQUFJLEVBQUEsQ0FDQWhGLElBQUEsV0FBb0IsT0FBQXdFLEVBQUFRLFFBUXBCOUYsRUFBQUQsUUFBQSxDQUNBb0UsYUFBQW1CLEVBQUFJLEVBQUEsS0FDQUssUUFBQU4sb0JDeENBekYsRUFBQUQsUUFBaUJGLEVBQVEsR0FBaUJrRywrMERDQzFDLFNBQVk1QyxHQUNSQSxJQUFBLGlDQUNBQSxJQUFBLGlCQUNBQSxJQUFBLGFBQ0FBLElBQUEsZUFKSixDQUFZcEQsRUFBQW9ELGNBQUFwRCxFQUFBb0QsWUFBVyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyB3M2N3ZWJzb2NrZXQgfSBmcm9tIFwid2Vic29ja2V0XCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vZW51bXNcIjtcclxuaW1wb3J0IHsgTWVzc2FnZSwgV29ya2VyUmVzdWx0IH0gZnJvbSBcIi4vaW50ZXJmYWNlc1wiO1xyXG5cclxuLypcclxuICAgIFN0YXRlXHJcbiovXHJcbmxldCBnZW5lcmF0aW9uID0gMDtcclxubGV0IHRoZW4gPSBEYXRlLm5vdygpO1xyXG5cclxuLypcclxuICAgIFBhZ2VcclxuKi9cclxubGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmxldCBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbmxldCBidXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG5sZXQgcGFsZXR0ZTogQXJyYXk8QXJyYXk8bnVtYmVyPj4gPSBbXTtcclxuXHJcbi8vIEhhbmRsZSBwYWdlIGxvYWRcclxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcclxuICAgIC8vIHNldHVwIGNhbnZhc1xyXG4gICAgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdjYW52YXMnICkgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoICcyZCcgKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBcclxuICAgIC8vIHNldHVwIHJlc2V0IGJ1dHRvblxyXG4gICAgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdyZXNldCcgKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIGJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBNZXNzYWdlVHlwZS5SRVNFVFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc29ja2V0LnNlbmQoIEpTT04uc3RyaW5naWZ5KCBtZXNzYWdlICkgKTtcclxuXHJcbiAgICAgICAgZ2VuZXJhdGlvbiA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVBhbGV0dGUoKTtcclxuXHJcbiAgICAvLyBTZW5kIGNvbmZpZ3VyYXRpb24gbWVzc2FnZVxyXG4gICAgbGV0IG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgdHlwZTogTWVzc2FnZVR5cGUuQ09ORklHVVJBVElPTixcclxuICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBjYW52YXMuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogY2FudmFzLmNsaWVudEhlaWdodFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBzb2NrZXQuc2VuZCggSlNPTi5zdHJpbmdpZnkoIG1lc3NhZ2UgKSApO1xyXG59XHJcblxyXG4vKlxyXG53aW5kb3cub25yZXNpemUgPSAoKSA9PiB7XHJcbiAgICBsZXQgbWVzc2FnZSA9IHtcclxuICAgICAgICB0eXBlOiBNZXNzYWdlVHlwZS5DT05GSUdVUkFUSU9OLFxyXG4gICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgd2lkdGg6IGNhbnZhcy5jbGllbnRXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBjYW52YXMuY2xpZW50SGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHNvY2tldC5zZW5kKCBKU09OLnN0cmluZ2lmeSggbWVzc2FnZSApICk7XHJcbn1cclxuKi9cclxuXHJcbmZ1bmN0aW9uIG1ha2VQYWxldHRlKCl7XHJcbiAgICBmdW5jdGlvbiB3cmFwKCB4OiBudW1iZXIgKXtcclxuICAgICAgICB4ID0gKCh4ICsgMjU2KSAmIDB4MWZmKSAtIDI1NjtcclxuICAgICAgICBpZiggeCA8IDAgKVxyXG4gICAgICAgICAgICB4ID0gLXg7XHJcbiAgICAgICAgcmV0dXJuIHg7XHJcbiAgICB9XHJcbiAgICBmb3IoIGxldCBpID0gMCA7IGkgPD0gNDA5NiA7IGkrKyApXHJcbiAgICAgICAgcGFsZXR0ZS5wdXNoKFt3cmFwKDcqaSksd3JhcCg1KmkpLHdyYXAoMTEqaSldKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1JvdyggcmVzdWx0OiBXb3JrZXJSZXN1bHQgKXtcclxuICAgIGxldCByb3cgPSBjb250ZXh0LmNyZWF0ZUltYWdlRGF0YSggY2FudmFzLmNsaWVudFdpZHRoLCAxICk7XHJcbiAgICBsZXQgcGl4ZWxzID0gcm93LmRhdGE7XHJcblxyXG4gICAgbGV0IHZhbHVlcyA9IHJlc3VsdC5kYXRhO1xyXG4gICAgZm9yKCBsZXQgaSA9IDAgOyBpIDwgcm93LndpZHRoIDsgaSsrICl7XHJcbiAgICAgICAgbGV0IHIgPSBpICogNDtcclxuICAgICAgICBsZXQgZyA9IGkgKiA0ICsgMTtcclxuICAgICAgICBsZXQgYiA9IGkgKiA0ICsgMjtcclxuICAgICAgICBsZXQgYSA9IGkgKiA0ICsgMztcclxuXHJcbiAgICAgICAgcGl4ZWxzW2FdID0gMjU1O1xyXG5cclxuICAgICAgICBpZiggdmFsdWVzWyBpIF0gPCAwIClcclxuICAgICAgICAgICAgcGl4ZWxzWyByIF0gPSBwaXhlbHNbIGcgXSA9IHBpeGVsc1sgYiBdID0gMDtcclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBsZXQgYyA9IHBhbGV0dGVbIHZhbHVlc1sgaSBdIF07XHJcbiAgICAgICAgICAgIHBpeGVsc1sgciBdID0gY1sgMCBdO1xyXG4gICAgICAgICAgICBwaXhlbHNbIGcgXSA9IGNbIDEgXTtcclxuICAgICAgICAgICAgcGl4ZWxzWyBiIF0gPSBjWyAyIF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnRleHQucHV0SW1hZ2VEYXRhKCByb3csIDAsIHJlc3VsdC5yb3cgKTtcclxufVxyXG5cclxuLypcclxuICAgIFdlYlNvY2tldFxyXG4qL1xyXG5sZXQgc29ja2V0ID0gbmV3IHczY3dlYnNvY2tldCggJ3dzOi8vbG9jYWxob3N0OjkwMzAnICk7XHJcblxyXG5zb2NrZXQub25vcGVuID0gKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coICdXZWJTb2NrZXQtQ29ubmVjdGlvbiBlc3RhYmxpc2hlZCcgKTtcclxufVxyXG5cclxuc29ja2V0Lm9ubWVzc2FnZSA9ICggZXZlbnQ6IE1lc3NhZ2VFdmVudCApID0+IHtcclxuICAgIGxldCBtZXNzYWdlID0gSlNPTi5wYXJzZSggZXZlbnQuZGF0YSApIGFzIE1lc3NhZ2U7XHJcbiAgICBsZXQgY29udGVudCA9IG1lc3NhZ2UuY29udGVudCBhcyBXb3JrZXJSZXN1bHQ7XHJcblxyXG4gICAgaWYoIGNvbnRlbnQucm93ID09PSBjYW52YXMuY2xpZW50SGVpZ2h0IC0gMSApe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCAnR2VuZXJhdGlvbjogJyArIGdlbmVyYXRpb24gKTtcclxuICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zb2xlLmxvZyggJ1RpbWUgZWxhcHNlZDogJyArICggdGhlbiAtIG5vdyApIC8gMTAwMCArICcgcycgKTtcclxuICAgICAgICB0aGVuID0gbm93O1xyXG4gICAgICAgIGdlbmVyYXRpb24rKztcclxuICAgIH1cclxuXHJcbiAgICBkcmF3Um93KCBjb250ZW50ICk7XHJcbn0iLCJ2YXIgX2dsb2JhbCA9IChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pKCk7XG52YXIgTmF0aXZlV2ViU29ja2V0ID0gX2dsb2JhbC5XZWJTb2NrZXQgfHwgX2dsb2JhbC5Nb3pXZWJTb2NrZXQ7XG52YXIgd2Vic29ja2V0X3ZlcnNpb24gPSByZXF1aXJlKCcuL3ZlcnNpb24nKTtcblxuXG4vKipcbiAqIEV4cG9zZSBhIFczQyBXZWJTb2NrZXQgY2xhc3Mgd2l0aCBqdXN0IG9uZSBvciB0d28gYXJndW1lbnRzLlxuICovXG5mdW5jdGlvbiBXM0NXZWJTb2NrZXQodXJpLCBwcm90b2NvbHMpIHtcblx0dmFyIG5hdGl2ZV9pbnN0YW5jZTtcblxuXHRpZiAocHJvdG9jb2xzKSB7XG5cdFx0bmF0aXZlX2luc3RhbmNlID0gbmV3IE5hdGl2ZVdlYlNvY2tldCh1cmksIHByb3RvY29scyk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0bmF0aXZlX2luc3RhbmNlID0gbmV3IE5hdGl2ZVdlYlNvY2tldCh1cmkpO1xuXHR9XG5cblx0LyoqXG5cdCAqICduYXRpdmVfaW5zdGFuY2UnIGlzIGFuIGluc3RhbmNlIG9mIG5hdGl2ZVdlYlNvY2tldCAodGhlIGJyb3dzZXIncyBXZWJTb2NrZXRcblx0ICogY2xhc3MpLiBTaW5jZSBpdCBpcyBhbiBPYmplY3QgaXQgd2lsbCBiZSByZXR1cm5lZCBhcyBpdCBpcyB3aGVuIGNyZWF0aW5nIGFuXG5cdCAqIGluc3RhbmNlIG9mIFczQ1dlYlNvY2tldCB2aWEgJ25ldyBXM0NXZWJTb2NrZXQoKScuXG5cdCAqXG5cdCAqIEVDTUFTY3JpcHQgNTogaHR0cDovL2JjbGFyeS5jb20vMjAwNC8xMS8wNy8jYS0xMy4yLjJcblx0ICovXG5cdHJldHVybiBuYXRpdmVfaW5zdGFuY2U7XG59XG5pZiAoTmF0aXZlV2ViU29ja2V0KSB7XG5cdFsnQ09OTkVDVElORycsICdPUEVOJywgJ0NMT1NJTkcnLCAnQ0xPU0VEJ10uZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KFczQ1dlYlNvY2tldCwgcHJvcCwge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIE5hdGl2ZVdlYlNvY2tldFtwcm9wXTsgfVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJ3czY3dlYnNvY2tldCcgOiBOYXRpdmVXZWJTb2NrZXQgPyBXM0NXZWJTb2NrZXQgOiBudWxsLFxuICAgICd2ZXJzaW9uJyAgICAgIDogd2Vic29ja2V0X3ZlcnNpb25cbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb247XG4iLCJcclxuZXhwb3J0IGVudW0gTWVzc2FnZVR5cGUge1xyXG4gICAgQ09ORklHVVJBVElPTixcclxuICAgIFJFU0VULFxyXG4gICAgUk9XLFxyXG4gICAgVEFTS1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==