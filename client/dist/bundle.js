!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),r=n(4);let i,s,c=0,l=Date.now(),u=[];window.onload=(()=>{i=document.getElementById("canvas"),s=i.getContext("2d"),function(){function e(e){return(e=(e+256&511)-256)<0&&(e=-e),e}for(let t=0;t<=1024;t++)u.push([e(7*t),e(5*t),e(11*t)])}();let e={type:r.MessageType.CONFIGURATION,content:{width:i.clientWidth,height:i.clientHeight}};a.send(JSON.stringify(e))});let a=new o.w3cwebsocket("ws://localhost:9030");a.onopen=(()=>{console.log("WebSocket-Connection established")}),a.onmessage=(e=>{let t=JSON.parse(e.data).content;if(t.row===i.clientHeight-1){console.log("Generation: "+c);let e=Date.now();console.log("Time elapsed: "+(l-e)/1e3+" s"),l=e,c++}!function(e){let t=s.createImageData(i.clientWidth,1),n=t.data,o=e.data;for(let e=0;e<t.width;e++){let t=4*e,r=4*e+1,i=4*e+2;if(n[4*e+3]=255,o[e]<0)n[t]=n[r]=n[i]=0;else{let s=u[o[e]];n[t]=s[0],n[r]=s[1],n[i]=s[2]}}s.putImageData(t,0,e.row)}(t)})},function(e,t,n){var o=function(){return this}(),r=o.WebSocket||o.MozWebSocket,i=n(2);function s(e,t){return t?new r(e,t):new r(e)}r&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(s,e,{get:function(){return r[e]}})}),e.exports={w3cwebsocket:r?s:null,version:i}},function(e,t,n){e.exports=n(3).version},function(e){e.exports={_from:"websocket",_id:"websocket@1.0.28",_inBundle:!1,_integrity:"sha512-00y/20/80P7H4bCYkzuuvvfDvh+dgtXi5kzDf3UcZwN6boTYaKvsrtZ5lIYm1Gsg48siMErd9M4zjSYfYFHTrA==",_location:"/websocket",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"websocket",name:"websocket",escapedName:"websocket",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.28.tgz",_shasum:"9e5f6fdc8a3fe01d4422647ef93abdd8d45a78d3",_spec:"websocket",_where:"D:\\JavaScript\\mandelbrot\\client",author:{name:"Brian McKelvey",email:"theturtle32@gmail.com",url:"https://github.com/theturtle32"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},bundleDependencies:!1,config:{verbose:!1},contributors:[{name:"IÃ±aki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.11.0","typedarray-to-buffer":"^3.1.5",yaeti:"^0.0.6"},deprecated:!1,description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.9.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.28"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CONFIGURATION=0]="CONFIGURATION",e[e.ROW=1]="ROW",e[e.TASK=2]="TASK"}(t.MessageType||(t.MessageType={}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYnNvY2tldC9saWIvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2Vic29ja2V0L2xpYi92ZXJzaW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9lbnVtcy50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIndlYnNvY2tldF8xIiwiZW51bXNfMSIsImNhbnZhcyIsImNvbnRleHQiLCJnZW5lcmF0aW9uIiwidGhlbiIsIkRhdGUiLCJub3ciLCJwYWxldHRlIiwid2luZG93Iiwib25sb2FkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJ3cmFwIiwieCIsInB1c2giLCJtYWtlUGFsZXR0ZSIsIm1lc3NhZ2UiLCJ0eXBlIiwiTWVzc2FnZVR5cGUiLCJDT05GSUdVUkFUSU9OIiwiY29udGVudCIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJzb2NrZXQiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInczY3dlYnNvY2tldCIsIm9ub3BlbiIsImNvbnNvbGUiLCJsb2ciLCJvbm1lc3NhZ2UiLCJldmVudCIsInBhcnNlIiwiZGF0YSIsInJvdyIsInJlc3VsdCIsImNyZWF0ZUltYWdlRGF0YSIsInBpeGVscyIsInZhbHVlcyIsImciLCJiIiwicHV0SW1hZ2VEYXRhIiwiZHJhd1JvdyIsIl9nbG9iYWwiLCJ0aGlzIiwiTmF0aXZlV2ViU29ja2V0IiwiV2ViU29ja2V0IiwiTW96V2ViU29ja2V0Iiwid2Vic29ja2V0X3ZlcnNpb24iLCJXM0NXZWJTb2NrZXQiLCJ1cmkiLCJwcm90b2NvbHMiLCJmb3JFYWNoIiwicHJvcCIsInZlcnNpb24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgs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QUFBRyxXQUFBSCxFQUFBSSxhQUNBQyxFQUF3QnpGLEVBQVEsR0FNaEMsU0FBQTBGLEVBQUFDLEVBQUFDLEdBaUJBLE9BZEFBLEVBQ0EsSUFBQU4sRUFBQUssRUFBQUMsR0FHQSxJQUFBTixFQUFBSyxHQVlBTCxHQUNBLHlDQUFBTyxRQUFBLFNBQUFDLEdBQ0FoRixPQUFBQyxlQUFBMkUsRUFBQUksRUFBQSxDQUNBN0UsSUFBQSxXQUFvQixPQUFBcUUsRUFBQVEsUUFRcEIzRixFQUFBRCxRQUFBLENBQ0FpRSxhQUFBbUIsRUFBQUksRUFBQSxLQUNBSyxRQUFBTixvQkN4Q0F0RixFQUFBRCxRQUFpQkYsRUFBUSxHQUFpQitGLCswRENDMUMsU0FBWXZDLEdBQ1JBLElBQUEsaUNBQ0FBLElBQUEsYUFDQUEsSUFBQSxlQUhKLENBQVl0RCxFQUFBc0QsY0FBQXRELEVBQUFzRCxZQUFXIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IHczY3dlYnNvY2tldCB9IGZyb20gXCJ3ZWJzb2NrZXRcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9lbnVtc1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlLCBXb3JrZXJSZXN1bHQgfSBmcm9tIFwiLi9pbnRlcmZhY2VzXCI7XHJcblxyXG4vKlxyXG4gICAgU3RhdGVcclxuKi9cclxubGV0IGdlbmVyYXRpb24gPSAwO1xyXG5sZXQgdGhlbiA9IERhdGUubm93KCk7XHJcblxyXG4vKlxyXG4gICAgUGFnZVxyXG4qL1xyXG5sZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxubGV0IGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxubGV0IHBhbGV0dGU6IEFycmF5PEFycmF5PG51bWJlcj4+ID0gW107XHJcblxyXG4vLyBIYW5kbGUgcGFnZSBsb2FkXHJcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2NhbnZhcycgKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCggJzJkJyApIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgICBtYWtlUGFsZXR0ZSgpO1xyXG5cclxuICAgIC8vIFNlbmQgY29uZmlndXJhdGlvbiBtZXNzYWdlXHJcbiAgICBsZXQgbWVzc2FnZSA9IHtcclxuICAgICAgICB0eXBlOiBNZXNzYWdlVHlwZS5DT05GSUdVUkFUSU9OLFxyXG4gICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgd2lkdGg6IGNhbnZhcy5jbGllbnRXaWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBjYW52YXMuY2xpZW50SGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHNvY2tldC5zZW5kKCBKU09OLnN0cmluZ2lmeSggbWVzc2FnZSApICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VQYWxldHRlKCl7XHJcbiAgICBmdW5jdGlvbiB3cmFwKCB4OiBudW1iZXIgKXtcclxuICAgICAgICB4ID0gKCh4ICsgMjU2KSAmIDB4MWZmKSAtIDI1NjtcclxuICAgICAgICBpZiggeCA8IDAgKVxyXG4gICAgICAgICAgICB4ID0gLXg7XHJcbiAgICAgICAgcmV0dXJuIHg7XHJcbiAgICB9XHJcbiAgICBmb3IoIGxldCBpID0gMCA7IGkgPD0gMTAyNCA7IGkrKyApXHJcbiAgICAgICAgcGFsZXR0ZS5wdXNoKFt3cmFwKDcqaSksd3JhcCg1KmkpLHdyYXAoMTEqaSldKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1JvdyggcmVzdWx0OiBXb3JrZXJSZXN1bHQgKXtcclxuICAgIGxldCByb3cgPSBjb250ZXh0LmNyZWF0ZUltYWdlRGF0YSggY2FudmFzLmNsaWVudFdpZHRoLCAxICk7XHJcbiAgICBsZXQgcGl4ZWxzID0gcm93LmRhdGE7XHJcblxyXG4gICAgbGV0IHZhbHVlcyA9IHJlc3VsdC5kYXRhO1xyXG4gICAgZm9yKCBsZXQgaSA9IDAgOyBpIDwgcm93LndpZHRoIDsgaSsrICl7XHJcbiAgICAgICAgbGV0IHIgPSBpICogNDtcclxuICAgICAgICBsZXQgZyA9IGkgKiA0ICsgMTtcclxuICAgICAgICBsZXQgYiA9IGkgKiA0ICsgMjtcclxuICAgICAgICBsZXQgYSA9IGkgKiA0ICsgMztcclxuXHJcbiAgICAgICAgcGl4ZWxzW2FdID0gMjU1O1xyXG5cclxuICAgICAgICBpZiggdmFsdWVzWyBpIF0gPCAwIClcclxuICAgICAgICAgICAgcGl4ZWxzWyByIF0gPSBwaXhlbHNbIGcgXSA9IHBpeGVsc1sgYiBdID0gMDtcclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBsZXQgYyA9IHBhbGV0dGVbIHZhbHVlc1sgaSBdIF07XHJcbiAgICAgICAgICAgIHBpeGVsc1sgciBdID0gY1sgMCBdO1xyXG4gICAgICAgICAgICBwaXhlbHNbIGcgXSA9IGNbIDEgXTtcclxuICAgICAgICAgICAgcGl4ZWxzWyBiIF0gPSBjWyAyIF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnRleHQucHV0SW1hZ2VEYXRhKCByb3csIDAsIHJlc3VsdC5yb3cgKTtcclxufVxyXG5cclxuLypcclxuICAgIFdlYlNvY2tldFxyXG4qL1xyXG5sZXQgc29ja2V0ID0gbmV3IHczY3dlYnNvY2tldCggJ3dzOi8vbG9jYWxob3N0OjkwMzAnICk7XHJcblxyXG5zb2NrZXQub25vcGVuID0gKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coICdXZWJTb2NrZXQtQ29ubmVjdGlvbiBlc3RhYmxpc2hlZCcgKTtcclxufVxyXG5cclxuc29ja2V0Lm9ubWVzc2FnZSA9ICggZXZlbnQ6IE1lc3NhZ2VFdmVudCApID0+IHtcclxuICAgIGxldCBtZXNzYWdlID0gSlNPTi5wYXJzZSggZXZlbnQuZGF0YSApIGFzIE1lc3NhZ2U7XHJcbiAgICBsZXQgY29udGVudCA9IG1lc3NhZ2UuY29udGVudCBhcyBXb3JrZXJSZXN1bHQ7XHJcblxyXG4gICAgaWYoIGNvbnRlbnQucm93ID09PSBjYW52YXMuY2xpZW50SGVpZ2h0IC0gMSApe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCAnR2VuZXJhdGlvbjogJyArIGdlbmVyYXRpb24gKTtcclxuICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zb2xlLmxvZyggJ1RpbWUgZWxhcHNlZDogJyArICggdGhlbiAtIG5vdyApIC8gMTAwMCArICcgcycgKTtcclxuICAgICAgICB0aGVuID0gbm93O1xyXG4gICAgICAgIGdlbmVyYXRpb24rKztcclxuICAgIH1cclxuXHJcbiAgICBkcmF3Um93KCBjb250ZW50ICk7XHJcbn0iLCJ2YXIgX2dsb2JhbCA9IChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pKCk7XG52YXIgTmF0aXZlV2ViU29ja2V0ID0gX2dsb2JhbC5XZWJTb2NrZXQgfHwgX2dsb2JhbC5Nb3pXZWJTb2NrZXQ7XG52YXIgd2Vic29ja2V0X3ZlcnNpb24gPSByZXF1aXJlKCcuL3ZlcnNpb24nKTtcblxuXG4vKipcbiAqIEV4cG9zZSBhIFczQyBXZWJTb2NrZXQgY2xhc3Mgd2l0aCBqdXN0IG9uZSBvciB0d28gYXJndW1lbnRzLlxuICovXG5mdW5jdGlvbiBXM0NXZWJTb2NrZXQodXJpLCBwcm90b2NvbHMpIHtcblx0dmFyIG5hdGl2ZV9pbnN0YW5jZTtcblxuXHRpZiAocHJvdG9jb2xzKSB7XG5cdFx0bmF0aXZlX2luc3RhbmNlID0gbmV3IE5hdGl2ZVdlYlNvY2tldCh1cmksIHByb3RvY29scyk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0bmF0aXZlX2luc3RhbmNlID0gbmV3IE5hdGl2ZVdlYlNvY2tldCh1cmkpO1xuXHR9XG5cblx0LyoqXG5cdCAqICduYXRpdmVfaW5zdGFuY2UnIGlzIGFuIGluc3RhbmNlIG9mIG5hdGl2ZVdlYlNvY2tldCAodGhlIGJyb3dzZXIncyBXZWJTb2NrZXRcblx0ICogY2xhc3MpLiBTaW5jZSBpdCBpcyBhbiBPYmplY3QgaXQgd2lsbCBiZSByZXR1cm5lZCBhcyBpdCBpcyB3aGVuIGNyZWF0aW5nIGFuXG5cdCAqIGluc3RhbmNlIG9mIFczQ1dlYlNvY2tldCB2aWEgJ25ldyBXM0NXZWJTb2NrZXQoKScuXG5cdCAqXG5cdCAqIEVDTUFTY3JpcHQgNTogaHR0cDovL2JjbGFyeS5jb20vMjAwNC8xMS8wNy8jYS0xMy4yLjJcblx0ICovXG5cdHJldHVybiBuYXRpdmVfaW5zdGFuY2U7XG59XG5pZiAoTmF0aXZlV2ViU29ja2V0KSB7XG5cdFsnQ09OTkVDVElORycsICdPUEVOJywgJ0NMT1NJTkcnLCAnQ0xPU0VEJ10uZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KFczQ1dlYlNvY2tldCwgcHJvcCwge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIE5hdGl2ZVdlYlNvY2tldFtwcm9wXTsgfVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJ3czY3dlYnNvY2tldCcgOiBOYXRpdmVXZWJTb2NrZXQgPyBXM0NXZWJTb2NrZXQgOiBudWxsLFxuICAgICd2ZXJzaW9uJyAgICAgIDogd2Vic29ja2V0X3ZlcnNpb25cbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb247XG4iLCJcclxuZXhwb3J0IGVudW0gTWVzc2FnZVR5cGUge1xyXG4gICAgQ09ORklHVVJBVElPTixcclxuICAgIFJPVyxcclxuICAgIFRBU0tcclxufSJdLCJzb3VyY2VSb290IjoiIn0=